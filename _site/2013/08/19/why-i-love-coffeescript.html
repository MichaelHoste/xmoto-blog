<!DOCTYPE html>
<html lang="en" prefix="fb: http://www.facebook.com/2008/fbml">
  <head>
    <meta charset="utf-8"/>
    <title> 3. Why I love CoffeeScript </title>
    <!-- For responsive site
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="author" href="/humans.txt">
    <meta name="description" content="Description Goes Here">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/custom.css">
    <!--[if IE 7]>
        <html class="ie7">
        <link rel="stylesheet" type="text/css" href="/css/font-awesome-ie7.min.css">
    <![endif]-->
    <!--[if IE 8]><html class="ie8"> <![endif]-->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <meta property="og:url"         content="http://xmoto.io/" />
    <meta property="og:title"       content="XMoto.io" />
    <meta property="og:description" content="HTML5 Version of XMoto" />
    <meta property="og:image"       content="http://xmoto.io/image.png" />

    <link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="ico/favicon.png">

    <!-- Analytics
    ================================================== -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32487253-5', 'xmoto.io');
      ga('send', 'pageview');

    </script>
  </head>
  <body>
    <header>

    </header>

    <a href="https://github.com/michaelhoste/xmoto">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
    </a>

    <div class="top-strip"></div>
<main class="content">
    <section class="container">
    	<div class="row-fluid">
    		<article class="home-icon">
				<a href="/">
					<i class="icon-home"></i>
				</a>
			</article>
			<article class="post">
				<h5>19 August 2013</h5>
				<h2 class="content">3. Why I love CoffeeScript</h2>
				<section>
					<p>Like I said in my <a href="/2013/08/18/choice-of-technology.html">previous post</a>, I will use <a href="http://coffeescript.org/">CoffeeScript</a> instead of JavaScript to develop XMoto for the web. This choice may not be obvious for all of you, but I&#39;d say it&#39;s a very good foundation for any web application.</p>

<p>But what exactly is CoffeeScript ?</p>

<p><a href="(http://coffeescript.org/"><img src="/img/coffeescript.png" alt="CoffeeScript"></a></p>

<h3>&quot;It&#39;s just JavaScript&quot;</h3>

<p>Like the official documentation says: <em>CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way</em>.</p>

<p>CoffeeScript is just &quot;another way to write JavaScript&quot;. Indeed, your CoffeeScript code will be transformed (compiled) to JavaScript. The <em>generated JavaScript code</em> will then be interpreted by the browser. Note that JavaScript is the only language that the browser is able to execute.</p>

<p>CoffeeScript is compatible with every JavaScript libraries and this is very important for this project because we want to use Box2D.</p>

<h3>Background</h3>

<p>For my passion for CoffeeScript to be well-understood, you need to know my programming background.</p>

<p>My first primary language was C, then C++. I made <a href="http://pongl.xc-lan.be/">some</a> <a href="http://www.youtube.com/watch?v=NOhIY6--W7s">games</a> using OpenGL with these languages so I was pretty confortable programming using curly brackets <code>{ }</code>, parentheses <code>( )</code>, variable declarations, <code>*.h</code> header files, etc.</p>

<p>For my studies, I needed to use Java (and I hated all those <a href="http://www.fluffycat.com/Java-Design-Patterns/">silly patterns</a> that we were forced to use for small projects !). I liked static and compiled languages but my need to be fast to hack small applications made me switch to more dynamic and interpreted languages like Python and Ruby.</p>

<p>Programming with Ruby was an experience so nice that I made it my job, <a href="http://www.80limit.com">developing web applications using Ruby on Rails</a>.</p>

<p>When I started to develop with JavaScript, it was a burden for me to write code. The syntax was verbose like the one of C, Java, etc. I didn&#39;t want to go back to this so I looked for alternatives and I found CoffeeScript.</p>

<h3>Syntactic sugar</h3>

<p>CoffeeScript comes with nice syntactic sugar that makes the syntax very clean. Like Python, the use of curly brackets <code>{ }</code> is replaced by the indentation of lines. You love it or you hate it, but for my part I like the strict convention.</p>

<p>Here are some examples of CoffeeScript syntax opposite to JavaScript syntax.</p>

<h4>Conditions</h4>

<p>JavaScript</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;;)&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;:(&#39;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>CoffeeScript</p>
<div class="highlight"><pre><code class="coffeescript language-coffeescript" data-lang="coffeescript"><span class="k">if</span> <span class="kc">true</span>
  <span class="nx">alert</span> <span class="s">&#39;;)&#39;</span>
<span class="k">else</span>
  <span class="nx">alert</span> <span class="s">&#39;:(&#39;</span>
</code></pre></div>
<p>You can also use one-line conditions</p>
<div class="highlight"><pre><code class="coffeescript language-coffeescript" data-lang="coffeescript"><span class="nx">alert</span> <span class="s">&#39;;)&#39;</span> <span class="k">if</span> <span class="kc">true</span>
</code></pre></div>
<h4>Loops</h4>

<p>JavaScript</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot;World&quot;</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<p>CoffeeScript</p>
<div class="highlight"><pre><code class="coffeescript language-coffeescript" data-lang="coffeescript"><span class="k">for</span> <span class="nx">word</span> <span class="k">in</span> <span class="p">[</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span> <span class="s">&quot;World&quot;</span><span class="p">]</span>
  <span class="nx">alert</span> <span class="nx">word</span>
</code></pre></div>
<h4>Ruby-style string interpolation.</h4>

<p>Javascript</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">author</span><span class="p">,</span> <span class="nx">quote</span><span class="p">,</span> <span class="nx">sentence</span><span class="p">;</span>
<span class="nx">author</span> <span class="o">=</span> <span class="s2">&quot;Wittgenstein&quot;</span><span class="p">;</span>
<span class="nx">quote</span> <span class="o">=</span> <span class="s2">&quot;A picture is a fact. -- &quot;</span> <span class="o">+</span> <span class="nx">author</span><span class="p">;</span>
</code></pre></div>
<p>CoffeeScript</p>
<div class="highlight"><pre><code class="coffeescript language-coffeescript" data-lang="coffeescript"><span class="nv">author = </span><span class="s">&quot;Wittgenstein&quot;</span>
<span class="nv">quote  = </span><span class="s">&quot;A picture is a fact. -- </span><span class="si">#{</span> <span class="nx">author</span> <span class="si">}</span><span class="s">&quot;</span>
</code></pre></div>
<h4>Simple hash with a function in it</h4>

<p>Javascript</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">math</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">root</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">,</span>
  <span class="nx">square</span><span class="o">:</span> <span class="nx">square</span><span class="p">,</span>
  <span class="nx">cube</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">square</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>CoffeeScript</p>
<div class="highlight"><pre><code class="coffeescript language-coffeescript" data-lang="coffeescript"><span class="nv">math =</span>
  <span class="nv">root: </span>  <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span>
  <span class="nv">square: </span><span class="nx">square</span>
  <span class="nv">cube: </span>  <span class="nf">(x) -&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">square</span> <span class="nx">x</span>
</code></pre></div>
<h4>Classes</h4>

<p>The most important advantage of CoffeeScript, for me, is the syntax of classes. JavaScript comes with prototypes that you can use to emulate classes. The bad part is that it increases the syntax burden.</p>

<p>CoffeeScript provides a very clean class structure with inheritance, constructor, etc.</p>
<div class="highlight"><pre><code class="coffeescript language-coffeescript" data-lang="coffeescript"><span class="k">class</span> <span class="nx">Animal</span>
  <span class="nv">constructor: </span><span class="nf">(@name) -&gt;</span>

  <span class="nv">move: </span><span class="nf">(meters) -&gt;</span>
    <span class="nx">alert</span> <span class="nx">@name</span> <span class="o">+</span> <span class="s">&quot; moved </span><span class="si">#{</span><span class="nx">meters</span><span class="si">}</span><span class="s">m.&quot;</span>

<span class="k">class</span> <span class="nx">Snake</span> <span class="k">extends</span> <span class="nx">Animal</span>
  <span class="nv">move: </span><span class="nf">-&gt;</span>
    <span class="nx">alert</span> <span class="s">&quot;Slithering...&quot;</span>
    <span class="k">super</span> <span class="mi">5</span>

<span class="k">class</span> <span class="nx">Horse</span> <span class="k">extends</span> <span class="nx">Animal</span>
  <span class="nv">move: </span><span class="nf">-&gt;</span>
    <span class="nx">alert</span> <span class="s">&quot;Galloping...&quot;</span>
    <span class="k">super</span> <span class="mi">45</span>

<span class="nv">sam = </span><span class="k">new</span> <span class="nx">Snake</span> <span class="s">&quot;Sammy the Python&quot;</span>
<span class="nv">tom = </span><span class="k">new</span> <span class="nx">Horse</span> <span class="s">&quot;Tommy the Palomino&quot;</span>

<span class="nx">sam</span><span class="p">.</span><span class="nx">move</span><span class="p">()</span>
<span class="nx">tom</span><span class="p">.</span><span class="nx">move</span><span class="p">()</span>
</code></pre></div>
<p>This class structure is what makes me switch to CoffeeScript for another project: <a href="https://sokoban-game.com">Sokoban</a>. When I converted some of my code from C to CoffeeScript, the size of the file was more 2 times smaller than the original size and nicer to read.</p>

<p>Here is a real CoffeeScript class that manage the creation of a Sokoban level with specfic methods to move the player and the boxes, or to roll back the movements : <a href="https://github.com/MichaelHoste/sokoban/blob/bc1f708af2c6d4aaf3f181ee1763a728c52a9a27/app/assets/javascripts/game/models/level_core.js.coffee">CoffeeScript file</a>.</p>

<p>This file is so clean in regard of a JavaScript file that, since that day, I switched and only write web applications using CoffeeScript.</p>

<h3>How to setup CoffeeScript</h3>

<p>Since CoffeeScript compiles to JavaScript, you have to install a binary file on your system and execute a simple command to generate your <code>.js</code> file :</p>
<div class="highlight"><pre><code class="sh language-sh" data-lang="sh">coffee -j bin/xmoto.js -wc src/*
</code></pre></div>
<p>It just says that it compiles each <code>.js</code> file from the <code>src/*</code> directory to <code>bin/xmoto.js</code> and join them in a single file (you can have multiple .coffee files).</p>

<p>the option &quot;-w&quot; means that coffee watches for any change you make in one of the <code>.coffee</code> files. At the moment you changed something, the new corresponding <code>.js</code> file is generated in realtime.</p>

<p>This way, you can code CoffeeScript on your editor and directly see the resulting web page on your browser in realtime with the last <code>.js</code> file.</p>

<h3>More information</h3>

<ul>
<li><a href="http://coffeescript.org">Official website</a></li>
<li><a href="http://coffeescript.org/#try:alert%20%22Hello%20CoffeeScript!%22">Try CoffeeScript online</a></li>
<li><a href="http://arcturo.github.io/library/coffeescript">The Little Book on CoffeeScript</a></li>
</ul>

					<hr>
				</section>
				<section style="font-weight:bold; margin-bottom: 5em">
					
							<a rel="prev" class="a-hover"href="/2013/08/18/choice-of-technology.html"><i class="icon-double-angle-left"></i> 2. Choice of technology</a>
						
						
							<a rel="next" style="float:right" class="a-hover"href="/2013/08/20/level-parsing.html">4. Level parsing (.lvl files) <i class=" icon-double-angle-right"></i></a>
					
				</section>
			</article>
		</div>
	</section>
</main>


    <footer>
      <div class="container">
        <a href="mailto:michael.hoste@gmail.com">Michaël Hoste</a> | <a href="http://80limit.com">80LIMIT</a> | Powered by <a href="http://richbray.me/frap/">Frappuccino</a>
      </div>
    </footer>

    <script src="/js/jquery-1.10.2.js"       type="text/javascript"></script>
    <script src="/js/Box2dWeb-2.1.a.3.js"    type="text/javascript"></script>
    <script src="/js/preloadjs-0.3.1.min.js" type="text/javascript"></script>
    <script src="/js/soundjs-0.5.0.min.js"   type="text/javascript"></script>

    <script src="/js/xmoto.js"               type="text/javascript"></script>
  </body>
</html>
